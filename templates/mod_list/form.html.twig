{% extends 'container.html.twig' %}

{% form_theme form _self %}

{% block content %}
    {# @var modListFormDto \App\Form\Mod\Dto\ModListFormDto #}
    {% set modListFormDto = form.vars.data %}

    {% embed '_partial/_page_header.html.twig' %}
        {% block page_title %}
            {{ modListFormDto.id ? 'Edit mod list'|trans : 'Create mod list'|trans }}
        {% endblock %}
    {% endembed %}

    {{ form_start(form) }}
    {{ form_row(form.name) }}
    {{ form_row(form.description) }}
    {{ form_row(form.owner) }}
    {{ form_row(form.active) }}

    {% if is_granted(constant('App\\Security\\Enum\\PermissionsEnum::MOD_LIST_APPROVE')) %}
        {{ form_row(form.approved) }}
    {% endif %}

    {% embed 'mod_list/_partial/_mod_tabs.html.twig' %}
        {% block mod_tabs %}
            {{ form_row(form.modGroups) }}
            {{ form_row(form.mods) }}
        {% endblock %}
    {% endembed %}

    <div class="form-group text-right">
        <button type="submit" class="btn-primary btn">{{ modListFormDto.id ? 'Apply'|trans : 'Create mod list'|trans }}</button>
        <a href="{{ path('app_mod_list_list') }}" class="btn-secondary btn">{{ 'Cancel'|trans }}</a>
    </div>
    {{ form_end(form) }}
{% endblock %}

{% block _mod_list_form_mods_row %}
    {% include 'mod_list/_partial/_mod_list_form_mods/_mod_list_form_mods_row.html.twig' %}
{% endblock %}


{% block _mod_list_form_modGroups_row %}
    {% include 'mod_list/_partial/_mod_list_form_mod_groups/_mod_list_form_mod_groups_row.html.twig' %}
{% endblock %}
